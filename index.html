<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  body {
    font-family: 'Comic Sans MS', cursive, sans-serif;
    background-color: #fffa66;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    margin: 0;
    overflow: hidden;
  }
  .container {
    text-align: center;
  }
  h1 {
    color: #ff6b6b;
    font-size: 2.5em;
    text-shadow: 2px 2px #fff;
    margin-bottom: 20px;
  }
  #fartButton {
    background-color: #4ed9b1;
    border: none;
    color: white;
    padding: 20px 40px;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-size: 24px;
    margin: 4px 2px;
    cursor: pointer;
    border-radius: 50px;
    box-shadow: 0 9px #45b29d;
    transition: all 0.3s;
    outline: none;
  }
  #fartButton:hover {
    background-color: #45b29d;
  }
  #fartButton:active {
    background-color: #45b29d;
    box-shadow: 0 5px #387e6e;
    transform: translateY(4px);
  }
  .fart-cloud {
    position: absolute;
    font-size: 30px;
    opacity: 0;
    transition: all 1s;
    pointer-events: none;
  }
</style>
</head>
<body>
  <div class="container">
    <h1>The Fart Button</h1>
    <button id="fartButton">Let it Rip!</button>
  </div>

  <audio id="fart1" src="https://funnybuttons.lol/sounds/fart1.mp3"></audio>
  <audio id="fart2" src="https://funnybuttons.lol/sounds/fart2.mp3"></audio>
  <audio id="fart3" src="https://funnybuttons.lol/sounds/fart3.mp3"></audio>
  <audio id="fart4" src="https://funnybuttons.lol/sounds/fart4.mp3"></audio>
  <audio id="fart5" src="https://funnybuttons.lol/sounds/fart5.mp3"></audio>

  <script>
    const button = document.getElementById('fartButton');
    const fartEmojis = ['💨', '🍑💨', '😖💨', '🌬️', '💩'];
    let clickCount = 0;

    // Create an AudioContext
    const audioContext = new (window.AudioContext || window.webkitAudioContext)();

    // Function to generate a more realistic fart sound
    function generateFartSound() {
        const oscillator = audioContext.createOscillator();
        const gainNode = audioContext.createGain();
        const filterNode = audioContext.createBiquadFilter();

        // Random base frequency between 50 and 200 Hz
        const baseFrequency = Math.random() * 150 + 50;
        oscillator.type = 'sawtooth';
        oscillator.frequency.setValueAtTime(baseFrequency, audioContext.currentTime);

        // Random duration between 0.1 and 0.5 seconds
        const duration = Math.random() * 0.4 + 0.1;

        // Envelope for more natural sound
        gainNode.gain.setValueAtTime(0, audioContext.currentTime);
        gainNode.gain.linearRampToValueAtTime(1, audioContext.currentTime + 0.01);
        gainNode.gain.setValueAtTime(1, audioContext.currentTime + duration - 0.05);
        gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + duration);

        // Filter for more "gurgling" sound
        filterNode.type = 'lowpass';
        filterNode.frequency.setValueAtTime(1000, audioContext.currentTime);
        filterNode.Q.setValueAtTime(10, audioContext.currentTime);

        // Modulate filter frequency for bubbling effect
        const modulationSpeed = 20 + Math.random() * 30;
        filterNode.frequency.setValueCurveAtTime(
            new Float32Array([1000, 500, 1500, 700, 1200, 600, 1000].map(f => f + Math.random() * 500)),
            audioContext.currentTime,
            duration
        );

        oscillator.connect(filterNode);
        filterNode.connect(gainNode);
        gainNode.connect(audioContext.destination);

        oscillator.start();
        oscillator.stop(audioContext.currentTime + duration);

        // Add a little "squelch" at the end
        setTimeout(() => {
            const squelch = audioContext.createOscillator();
            const squelchGain = audioContext.createGain();
            squelch.type = 'sine';
            squelch.frequency.setValueAtTime(200, audioContext.currentTime);
            squelch.frequency.exponentialRampToValueAtTime(50, audioContext.currentTime + 0.1);
            squelchGain.gain.setValueAtTime(0.5, audioContext.currentTime);
            squelchGain.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);
            squelch.connect(squelchGain);
            squelchGain.connect(audioContext.destination);
            squelch.start();
            squelch.stop(audioContext.currentTime + 0.1);
        }, duration * 1000 - 100);
    }

    button.addEventListener('click', () => {
        clickCount++;
        
        // Generate fart sound
        generateFartSound();

        // Create and animate fart cloud
        const fartCloud = document.createElement('div');
        fartCloud.classList.add('fart-cloud');
        fartCloud.innerText = fartEmojis[Math.floor(Math.random() * fartEmojis.length)];
        document.body.appendChild(fartCloud);

        const randomX = Math.random() * window.innerWidth;
        const randomY = Math.random() * window.innerHeight;

        fartCloud.style.left = `${randomX}px`;
        fartCloud.style.top = `${randomY}px`;

        setTimeout(() => {
            fartCloud.style.opacity = '1';
            fartCloud.style.transform = `translate(${Math.random() * 100 - 50}px, ${Math.random() * 100 - 50}px) rotate(${Math.random() * 360}deg)`;
        }, 10);

        setTimeout(() => {
            fartCloud.style.opacity = '0';
        }, 1000);

        setTimeout(() => {
            document.body.removeChild(fartCloud);
        }, 2000);

        // Change button text after multiple clicks
        if (clickCount === 5) {
            button.innerText = "Phew! Stinky!";
        } else if (clickCount === 10) {
            button.innerText = "You're on a roll!";
        } else if (clickCount === 20) {
            button.innerText = "Gaseous Maximus!";
        } else if (clickCount % 50 === 0) {
            button.innerText = `${clickCount} Farts! You need help!`;
        }
    });
</script>
</body></html>